<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>PowerLifting Blog</title>
    <link rel="stylesheet" href="/style.css">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        .pressed { background-color: lightgrey; }
    </style>
</head>

<body>
    <div id="root"></div>
    <script type="text/babel"> 

    const Header = () => {
      const styles = {

      }
      return (
        <header style={styles}>
          WELCOME TO MY POWERLIFTING BLOG
        </header>
      )
    }

    const Footer = () => {
      const styles = {

      }
      return (
        <footer style={styles}>
          Copyright 2024 UVG
        </footer>
      )
    }

    const Post = ({
    title, content, competitor_name, top_squat, top_bench, top_deadlift, category
    }) => {
    const defaultImageUrl = "/Images/powerlifting.jpg"; 
    const tagClasses = `tag ${category.toLowerCase()}`;

    return (
        <div className="card">
        <div className="card-header">
            <img src={defaultImageUrl} alt="Default" />
        </div>
        <div className="card-body">
            <span className={tagClasses}>Category {category} </span> 
            <h4>{title}</h4>
            <p>{content}</p>
            <div className="user-info">
            <p>Competidor: {competitor_name}</p>
            <p>Top Squat: {top_squat}</p>
            <p>Top Bench: {top_bench}</p>
            <p>Top Deadlift: {top_deadlift}</p>
            </div>
        </div>
        </div>
    );
    };


    const Posts = () => {
        const [posts, setPosts] = React.useState([]);

      const getPosts = async () => {
        const apiResponse = await fetch('https://api.tiburoncin.lat/22119/posts')
        const jsonPosts = await apiResponse.json()
        const formattedPosts = jsonPosts.map(
          ({ title, content, competitor_name, top_squat, top_bench, top_deadlift, category }) => ({ title, content, competitor_name, top_squat, top_bench, top_deadlift, category })
        ) 
        setPosts(formattedPosts)

        
      }
 
      React.useEffect(() => {
        getPosts();
    }, []);

    if (posts.length === 0) {
        return <div>Loading...</div>;
    }

    return (
        <div className="container">
        {posts.map((post, index) => (
            <Post key={index} {...post} />
        ))}
        </div>
    );
    }

    const App = () => {
      const styles = {

      }
      return (
        <main style={styles}>
          <Header />
          <Posts />
          <Footer />
        </main>
      )
    }

    const root = ReactDOM.createRoot(document.getElementById('root'))
    root.render(<App />)
    </script>
</body>
</html>